# Configuration Support

### Key Features

#### 1. Configuration Support



* **Integrated Configuration**: Complete context options in `RAGAnythingConfig`
* **Environment Variables**: Configure all context parameters via environment variables
* **Dynamic Updates**: Runtime configuration updates supported
* **Content Format Control**: Configurable content source format detection

#### 2. Automated Integration



* **Auto-Initialization**: Modal processors automatically receive tokenizer and context configuration
* **Content Source Setup**: Document processing automatically sets content sources for context extraction
* **Position Information**: Automatic position info (page\_idx, index) passed to processors
* **Batch Processing**: Context-aware batch processing for efficient document handling

#### 3. Advanced Token Management



* **Accurate Token Counting**: Uses LightRAG's tokenizer for precise token calculation
* **Smart Boundary Preservation**: Truncates at sentence/paragraph boundaries
* **Backward Compatibility**: Fallback to character truncation when tokenizer unavailable

#### 4. Universal Context Extraction



* **Multiple Formats**: Support for MinerU, plain text, custom formats
* **Flexible Modes**: Page-based and chunk-based context extraction
* **Content Filtering**: Configurable content type filtering
* **Header Support**: Optional inclusion of document headers and structure

### Configuration



#### RAGAnythingConfig Parameters



```
# Context Extraction Configuration
context_window: int = 1                    # Context window size (pages/chunks)
context_mode: str = "page"                 # Context mode ("page" or "chunk")
max_context_tokens: int = 2000             # Maximum context tokens
include_headers: bool = True               # Include document headers
include_captions: bool = True              # Include image/table captions
context_filter_content_types: List[str] = ["text"]  # Content types to include
content_format: str = "minerU"             # Default content format for context extraction
```

#### Environment Variables



```
# Context extraction settings
CONTEXT_WINDOW=2
CONTEXT_MODE=page
MAX_CONTEXT_TOKENS=3000
INCLUDE_HEADERS=true
INCLUDE_CAPTIONS=true
CONTEXT_FILTER_CONTENT_TYPES=text,image
CONTENT_FORMAT=minerU
```
